{% if results %}
<div class="space-y-3">
    <p class="text-sm text-gray-400 mb-4">
        Found {{ results|length }} result{% if results|length != 1 %}s{% endif %}
        {% if query %}for "<span class="text-cyan-400">{{ query }}</span>"{% endif %}
    </p>
    
    {% for result in results %}
    <div class="glass rounded-xl p-4 hover:bg-white/5 transition-colors edge-cyan">
        <!-- Header -->
        <div class="flex items-start justify-between mb-3">
            <div class="flex-1">
                <div class="flex items-center gap-2 mb-1">
                    <!-- Source Type Badge -->
                    <span class="text-xs px-2 py-0.5 rounded-full bg-cyan-500/20 text-cyan-400">
                        {{ result.source_type or 'web' }}
                    </span>
                    
                    <!-- Similarity Score -->
                    <span class="text-xs px-2 py-0.5 rounded-full 
                        {% if result.similarity >= 0.7 %}bg-green-500/20 text-green-400
                        {% elif result.similarity >= 0.5 %}bg-yellow-500/20 text-yellow-400
                        {% else %}bg-gray-500/20 text-gray-400{% endif %}">
                        {{ "%.0f"|format(result.similarity * 100) }}% match
                    </span>
                </div>
                
                <!-- Title -->
                <h3 class="font-semibold text-white">{{ result.title or 'Untitled' }}</h3>
                
                <!-- URL -->
                {% if result.url %}
                <a href="{{ result.url }}" target="_blank" 
                   class="text-xs text-gray-500 hover:text-cyan-400 flex items-center gap-1 mt-1 truncate max-w-lg">
                    <i data-lucide="external-link" class="w-3 h-3"></i>
                    {{ result.url }}
                </a>
                {% endif %}
            </div>
            
            <!-- Chunk Number -->
            <span class="text-xs text-gray-600">Chunk #{{ result.chunk_number }}</span>
        </div>
        
        <!-- Content Preview -->
        <div class="text-sm text-gray-300 bg-black/30 rounded-lg p-3 font-mono leading-relaxed">
            <pre class="whitespace-pre-wrap break-words">{{ result.content[:500] }}{% if result.content|length > 500 %}...{% endif %}</pre>
        </div>
        
        <!-- Metadata -->
        {% if result.metadata %}
        <div class="flex items-center gap-4 mt-3 text-xs text-gray-500">
            {% if result.metadata.headers %}
            <span class="flex items-center gap-1">
                <i data-lucide="heading" class="w-3 h-3"></i>
                {{ result.metadata.headers|length }} headers
            </span>
            {% endif %}
            <span class="flex items-center gap-1">
                <i data-lucide="text" class="w-3 h-3"></i>
                {{ result.content|length }} chars
            </span>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>

{% elif query %}
<div class="text-center py-16">
    <i data-lucide="search-x" class="w-16 h-16 text-gray-600 mx-auto mb-4"></i>
    <p class="text-gray-500">No results found for "{{ query }}"</p>
    <p class="text-gray-600 text-sm mt-2">Try different keywords or enable hybrid search</p>
</div>

{% else %}
<div class="text-center py-16">
    <i data-lucide="search" class="w-16 h-16 text-gray-600 mx-auto mb-4"></i>
    <p class="text-gray-500">Enter a query to search your knowledge base</p>
</div>
{% endif %}
